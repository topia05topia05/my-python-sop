# リファレンス：GitHub Actions 設定 (.github/workflows/ci.yml)

このページは、我々のサイトの、自動化を、司る、ロボットへの、契約書`ci.yml`の、意味を、解説したものです。

---

## 基本構造

`ci.yml`は、**「いつ(on)、何（jobs）を、どうやって（steps）、やるか」**を定義する、指示書です。

## 主要な設定キー

### `name`

- **意味:** この、ワークフロー全体の、名前。GitHubの`Actions`タブに、表示されます。
- **例:** `name: Build and Deploy Docs`

### `on`

- **意味:** この、ワークフローを、起動させる、**きっかけ（トリガー）**を、定義します。
- **我々の設定:**
    ```yaml
    on:
      push: # pushイベントがあった時に
        branches:
          - main # mainブランチに、限定する
    ```

### `permissions`

- **意味:** この、ワークフロー（ロボット）が、このリポジトリに対して、持つ、**権限**を、明示的に、宣言します。
- **我々の設定:**
    - `contents: write`: サイトの完成品を、`gh-pages`ブランチに、書き込む（`write`）ための、許可証。近年の、GitHubの、セキュリティ強化により、この、明示的な宣言が、必須となりました。

### `jobs`

- **意味:** この、ワークフローが、実行する、一連の、**仕事**の、集まり。
- **我々の設定:**
    - `build-and-deploy:` という名前の、仕事を、一つだけ、定義しています。
    - `runs-on: ubuntu-latest:` この仕事は、「Ubuntuという、まっさらな、コンピュータの上で、実行しなさい」という、指示です。

### `steps`

- **意味:** `build-and-deploy`という仕事を、構成する、具体的な、**手順**の、リスト。
- **主要な、ステップ:**
    - `uses: actions/checkout@v4`:
        - あなたのリポジトリの、最新のコードを、この、まっさらなコンピュータの上に、コピーしてくる、という、お決まりの、最初の、ステップ。
    - `uses: actions/setup-python@v5`:
        - Pythonを使えるように、準備する、ステップ。
    - `run: pip install ...`:
        - 実際に、コマンドラインで、コマンドを実行する、ステップ。ここで、`mkdocs`を、インストールしています。
    - `run: mkdocs build`:
        - サイトを、ビルドする、ステップ。
    - `uses: peaceiris/actions-gh-pages@v3`:
        - `peaceiris`という、英雄が、作ってくれた、便利な、**既製品の、アクション（ロボット）**を、呼び出す、ステップ。
        - このロボットが、ビルドされたサイト（`site/`フォルダ）を、`gh-pages`ブランチへと、自動で、`push`してくれる、という、最も、重要な、処理を、代行してくれます。